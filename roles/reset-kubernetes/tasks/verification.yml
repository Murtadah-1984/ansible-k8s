---
# Verification and Summary
# Verifies reset status and displays summary

# =============================================================================
# 9) VERIFICATION AND SUMMARY
# =============================================================================
- name: Check kubelet service status
  ansible.builtin.systemd:
    name: kubelet
  register: kubelet_status
  failed_when: false
  changed_when: false

- name: Check containerd service status
  ansible.builtin.systemd:
    name: containerd
  register: containerd_status
  failed_when: false
  changed_when: false

- name: Display reset summary
  ansible.builtin.debug:
    msg:
      - "======================================================"
      - "✔ DONE — Node {{ inventory_hostname }} is fully reset"
      - ""
      - "Kubelet status: {{ 'stopped (disabled)' if kubelet_status.status.ActiveState == 'inactive' else kubelet_status.status.ActiveState }}"
      - "Containerd status: {{ containerd_status.status.ActiveState }}"
      - ""
      - "ℹ️ kubelet intentionally left DISABLED —"
      - "   it will be enabled automatically when you join/init the node."
      - ""
      - "======================================================"

