---
# Kubernetes Cluster Reset Role - Main Entry Point
# Orchestrates complete Kubernetes node reset

# =============================================================================
# SAFETY CHECKS
# =============================================================================
- name: Run safety checks
  include_tasks: safety.yml

# =============================================================================
# STATIC PODS SHUTDOWN
# =============================================================================
- name: Gracefully stop static pods
  include_tasks: static_pods.yml

# =============================================================================
# SERVICE MANAGEMENT
# =============================================================================
- name: Stop services
  include_tasks: services.yml

# =============================================================================
# KUBEADM RESET
# =============================================================================
- name: Execute kubeadm reset
  include_tasks: kubeadm_reset.yml

# =============================================================================
# CNI CLEANUP
# =============================================================================
- name: Clean up CNI
  include_tasks: cni_cleanup.yml

# =============================================================================
# STATE CLEANUP
# =============================================================================
- name: Clean up Kubernetes state
  include_tasks: state_cleanup.yml

# =============================================================================
# CONTAINERD CLEANUP
# =============================================================================
- name: Clean up containerd
  include_tasks: containerd_cleanup.yml

# =============================================================================
# VERIFICATION
# =============================================================================
- name: Verify reset status
  include_tasks: verification.yml
