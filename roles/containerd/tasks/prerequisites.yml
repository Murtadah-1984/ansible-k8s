---
# Prerequisites and Dependency Checks
# Verifies containerd installation status and installs dependencies

# ============================================================================
# PREREQUISITE CHECKS
# ============================================================================
- name: Check if containerd is already installed
  command: which containerd
  register: containerd_check
  changed_when: false
  failed_when: false

- name: Check if runc is already installed
  command: which runc
  register: runc_check
  changed_when: false
  failed_when: false

# ============================================================================
# DEPENDENCIES INSTALLATION
# ============================================================================
- name: Install containerd dependencies
  apt:
    name:
      - ca-certificates
      - curl
      - gnupg
      - lsb-release
      - jq
    state: present
    update_cache: true
  when: containerd_check.rc != 0 or runc_check.rc != 0

