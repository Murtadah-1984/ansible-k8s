---
# OS Version Check
# Verifies Ubuntu version and waits for cloud-init

- name: Fail if not Ubuntu 24.04
  assert:
    that:
      - ansible_distribution == "Ubuntu"
      - ansible_distribution_version == "24.04"
    fail_msg: "This role is optimized for Ubuntu 24.04 LTS (detected: {{ ansible_distribution }} {{ ansible_distribution_version }})"

- name: Wait for cloud-init
  command: cloud-init status --wait
  changed_when: false
  failed_when: false

