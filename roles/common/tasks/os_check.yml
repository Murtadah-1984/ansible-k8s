---
# OS Version Check
# Verifies Ubuntu version and waits for cloud-init

- name: Verify Ubuntu version is supported
  assert:
    that:
      - ansible_distribution == "Ubuntu"
      - ansible_distribution_version in supported_ubuntu_versions | default(['22.04', '24.04'])
    fail_msg: "This role supports Ubuntu 22.04 LTS and 24.04 LTS (detected: {{ ansible_distribution }} {{ ansible_distribution_version }})"

- name: Wait for cloud-init
  command: cloud-init status --wait
  changed_when: false
  failed_when: false

